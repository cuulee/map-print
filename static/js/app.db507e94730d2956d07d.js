webpackJsonp([2],{"14gb":function(n,e,t){"use strict";var o=t("puH/")({});e.a=o},"9SxT":function(n,e,t){"use strict";var o,a,r,i={currentState:"intro",selected:null,aboutVisible:!1,blank:!1,error:null,kmlLayers:[],currentScript:"roads",showZoomWarning:!1,possibleScripts:{selected:"roads",options:[{value:"roads",text:"Roads"},{value:"buildings",text:"Buildings"},{value:"rivers",text:"Rivers"}]},downloadOsmProgress:null,building:!1,buildingMessage:"",zazzleLink:null,showCancelDownload:!1,getGraphBBox:function(){return a},getGraph:function(){return o},setGraph:function(n,e,t){o=n,a=e,r=t},startOver:function(){i.zazzleLink=null,i.generatingPreview=!1,i.currentState="intro",i.blank=!1,i.downloadOsmProgress=null,i.kmlLayers=[]},generatingPreview:!1,backgroundColor:{r:255,g:255,b:255,a:1},lineColor:{r:22,g:22,b:22,a:.85},getProjector:function(){return r},addKMLLayer:function(n,e){i.kmlLayers.push(function(n,e){var t={name:n,color:e.color,width:e.width,updateColor:function(){e.updateColor(t.color)},getKMLLayer:function(){return e}};return t}(n,e))},removeKMLLayer:function(n){var e=i.kmlLayers.indexOf(n);if(e<0)throw new Error("Invalid layer to remove");i.kmlLayers.splice(e,1)}};e.a=i},NHnr:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});t("ifoU");var o=t("vccH"),a="https://overpass-api.de/api/interpreter";function r(n,e){return Object(o.a)(a,{method:"POST",responseType:"json",progress:e,headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"data="+encodeURIComponent(n)},"POST")}var i="[timeout:9000][maxsize:2000000000][out:json];",s=["motorway","motorway_link","trunk","trunk_link","primary","primary_link","secondary","secondary_link","tertiary","tertiary_link","unclassified","unclassified_link","residential","residential_link","service","service_link","living_street","pedestrian","road"].join("|"),l={roads:function(n){return i+'\n(\n  way["highway"~"'+s+'"]('+n+");\n  node(w);\n);\nout skel;"},waterway:function(n){return i+'\n(\n  way["waterway"]('+n+");\n  node(w);\n);\nout skel;"},buildings:function(n){return i+'\n(\n  way["building"]('+n+");\n  node(w);\n);\nout skel;"},rivers:function(n){return i+'\n(\n  way["waterway"="river"]('+n+");\n  node(w);\n);\nout skel;"}};var u=t("9SxT"),d=t("14gb"),c=t("//Fk"),h=t.n(c),f=t("Zrlr"),g=t.n(f),m=t("wxAW"),p=t.n(m),w=function(){function n(){g()(this,n),this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY}return p()(n,[{key:"growBy",value:function(n){this.minX-=n,this.minY-=n,this.maxX+=n,this.maxY+=n}},{key:"addPoint",value:function(n,e){if(void 0===n)throw new Error("Point is not defined");var t=n,o=e;void 0===o&&(t=n.x,o=n.y),t<this.minX&&(this.minX=t),t>this.maxX&&(this.maxX=t),o<this.minY&&(this.minY=o),o>this.maxY&&(this.maxY=o)}},{key:"addRect",value:function(n){if(!n)throw new Error("rect is not defined");this.addPoint(n.left,n.top),this.addPoint(n.right,n.top),this.addPoint(n.left,n.bottom),this.addPoint(n.right,n.bottom)}},{key:"merge",value:function(n){n.minX<this.minX&&(this.minX=n.minX),n.minY<this.minY&&(this.minY=n.minY),n.maxX>this.maxX&&(this.maxX=n.maxX),n.maxY>this.maxY&&(this.maxY=n.maxY)}},{key:"left",get:function(){return this.minX}},{key:"top",get:function(){return this.minY}},{key:"right",get:function(){return this.maxX}},{key:"bottom",get:function(){return this.maxY}},{key:"width",get:function(){return this.maxX-this.minX}},{key:"height",get:function(){return this.maxY-this.minY}},{key:"cx",get:function(){return(this.minX+this.maxX)/2}},{key:"cy",get:function(){return(this.minY+this.maxY)/2}}]),n}(),y=t("JQN8");var v=t("T/ob"),b=t("4gmu");function k(n,e,t){var o=n.elements;return function(){var n=new w;return new h.a(function(t){b(o,e,function(){t(n)})});function e(e,a){"node"===e.type&&n.addPoint(e.lon,e.lat),a%5e4==0&&t(a,o.length,"bounds")}}().then(function(n){var a=function(n,e){e||(e=6371393);var t=[0,0],o=y.geoMercator().center([n.cx,n.cy]).scale(e);return function(n,e){t[0]=n,t[1]=e;var a=o(t);return{x:a[0],y:a[1]}}}(n),r=v(),i=new w;return new h.a(function(n){b(o,s,function(){return n({graph:r,projector:a,bounds:i})})});function s(n,s){if("node"===n.type){if(e&&!e(n))return;var l=a(n.lon,n.lat);i.addPoint(l.x,l.y),r.addNode(n.id,l)}else"way"===n.type&&n.nodes.forEach(function(e,t){if(t>0){var o=n.nodes[t-1],a=n.nodes[t];r.getNode(o)&&r.getNode(a)&&r.addLink(o,a)}});s%5e4==0&&t(s,o.length,"graph")}})}var x=t("AMV0"),Y=t.n(x);function I(n){return Y()(n)?n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"N/A"}t.e(0).then(function(){t("WOBu")}.bind(null,t)).catch(t.oe);var N,X=void 0;function T(){u.a.showZoomWarning=X.getZoom()<9.7}function L(){var n=X.getBounds(),e=n.getSouthWest(),t=n.getNorthEast(),o=e.lat+","+e.lng+","+t.lat+","+t.lng;u.a.building=!0,u.a.buildingMessage="Sending query to OSM...",u.a.blank=!1,u.a.error=null;var a,i,s=function(n,e,t){return r(l[n](e),t)}(u.a.possibleScripts.selected,o,C);i=function(n){return n.lon>=e.lng&&n.lon<=t.lng&&n.lat>=e.lat&&n.lat<=t.lat},N=(a=s).cancel,u.a.showCancelDownload=!0,a.then(function(n){return N=null,u.a.showCancelDownload=!1,k(n,i,P)}).then(function(n){var e=n.graph,t=n.bounds,o=n.projector;u.a.setGraph(e,t,o),u.a.building=!1,0===e.getLinksCount()?u.a.blank=!0:(u.a.currentState="canvas",u.a.blank=!1,d.a.fire("graph-loaded"))}).catch(function(n){n&&n.cancelled?(N=null,u.a.building=!1,u.a.showCancelDownload=!1):(u.a.building=!1,u.a.error=n)})}function C(n){var e=I(n.loaded);if(n.lengthComputable){var t=I(n.total);u.a.buildingMessage="Downloading data: "+100*n.percent+"% ("+e+" of "+t+" bytes)"}else u.a.buildingMessage="Downloading data: "+e+" bytes so far..."}function P(n,e,t){var o=I(e),a=I(n);u.a.buildingMessage="graph"===t?"Making graph: "+a+" of "+o+" records":"Computing bounds: "+a+" of "+o+" records"}u.a.init=function(){mapboxgl.accessToken="pk.eyJ1IjoiYW52YWthIiwiYSI6ImNqaWUzZmhqYzA1OXMza213YXh2ZzdnOWcifQ.t5yext53zn1c9Ixd7Y41Dw",(X=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v9",center:[-122.2381,47.624],zoom:11.32,hash:!0})).addControl(new mapboxgl.NavigationControl({showCompass:!1}),"bottom-right"),X.on("zoom",T),X.dragRotate.disable(),X.touchZoomRotate.disableRotation(),T(),d.a.on("download-all-roads",L),d.a.on("cancel-download-all-roads",function(){N&&N()})}},vccH:function(n,e,t){"use strict";e.a=function(n,e){e||(e={});var t=void 0,o=new i.a(function(o,r){t=new XMLHttpRequest,"function"==typeof e.progress&&t.addEventListener("progress",function(n){n.lengthComputable?e.progress({loaded:n.loaded,total:n.total,percent:n.loaded/n.total,lengthComputable:!0}):e.progress({loaded:n.loaded,lengthComputable:!1})},!1);t.addEventListener("load",function(){if(200===t.status){var a=t.response;"json"===e.responseType&&"string"==typeof a&&(a=JSON.parse(a)),o(a)}else r("Unexpected status code "+t.status+" when calling "+n)},!1),t.addEventListener("error",function(){r("Failed to download "+n)},!1),t.addEventListener("abort",function(){r({cancelled:!0,message:"Cancelled download of "+n})},!1),t.open(e.method||"GET",n),e.responseType&&(t.responseType=e.responseType);e.headers&&a()(e.headers).forEach(function(n){t.setRequestHeader(n,e.headers[n])});"POST"===e.method?t.send(e.body):t.send(null)});return o.cancel=function(){t&&t.abort()},o};var o=t("fZjL"),a=t.n(o),r=t("//Fk"),i=t.n(r)}},["NHnr"]);
//# sourceMappingURL=app.db507e94730d2956d07d.js.map